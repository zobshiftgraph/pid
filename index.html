<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Weather Briefing Grid</title>
    <style>
        body { font-family: 'Segoe UI', Arial, sans-serif; padding: 30px; background-color: #f4f7f6; color: #333; }
        .container { max-width: 800px; margin: auto; background: white; padding: 20px; border-radius: 8px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); }
        
        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        th, td { padding: 12px; border: 1px solid #dfe6e9; text-align: center; }
        th { background-color: #0984e3; color: white; }
        tr:nth-child(even) { background-color: #f9f9f9; }
        
        .btn { padding: 10px 18px; background: #0984e3; color: white; border: none; border-radius: 4px; cursor: pointer; font-weight: bold; }
        .btn-save { background: #00b894; width: 100%; margin-top: 15px; padding: 12px; }
        
        #modalOverlay {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.6); z-index: 1000;
        }
        .modal-content {
            background: white; width: 90%; max-width: 500px; margin: 50px auto; padding: 25px;
            border-radius: 8px; max-height: 85vh; overflow-y: auto;
        }
        .input-group { display: flex; gap: 10px; margin-bottom: 12px; align-items: center; border-bottom: 1px solid #eee; padding-bottom: 8px; }
        .input-group label { width: 70px; font-weight: bold; font-size: 0.9em; }
        input[type="text"] { flex: 1; padding: 8px; border: 1px solid #ccc; border-radius: 4px; }
        
        .top-bar { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; }
    </style>
</head>
<body>

<div class="container">
    <div class="top-bar">
        <h2>Weather Briefing</h2>
        <div>
            <input type="checkbox" id="daySupCheck" onchange="saveAllData()"> 
            <label for="daySupCheck"><strong>Day Sup Checked</strong></label>
        </div>
    </div>

    <button class="btn" onclick="openModal()">Edit All Areas</button>

    <table id="weatherTable">
        <thead>
            <tr>
                <th>Area</th>
                <th>Turbulence</th>
                <th>Icing</th>
            </tr>
        </thead>
        <tbody id="tableBody"></tbody>
    </table>
</div>

<div id="modalOverlay">
    <div class="modal-content">
        <h3>Update All Areas</h3>
        <div id="modalInputs"></div>
        <button class="btn btn-save" onclick="updateAndSave()">Apply Changes</button>
        <button class="btn" style="background:#b2bec3; width:100%; margin-top:8px;" onclick="closeModal()">Close</button>
    </div>
</div>

<script>
    const tableBody = document.getElementById('tableBody');
    const modalInputs = document.getElementById('modalInputs');

    // Default values for Area 8 as requested
    const defaults = {
        turb8: "02 03 06 08",
        ice8: "02 08"
    };

    // Initialize HTML Structure
    for (let i = 1; i <= 8; i++) {
        let tVal = (i === 8) ? defaults.turb8 : "";
        let iVal = (i === 8) ? defaults.ice8 : "";

        tableBody.innerHTML += `
            <tr id="row-${i}">
                <td><strong>Area ${i}</strong></td>
                <td class="turb-cell">${tVal}</td>
                <td class="ice-cell">${iVal}</td>
            </tr>`;
        
        modalInputs.innerHTML += `
            <div class="input-group">
                <label>Area ${i}</label>
                <input type="text" id="turb-in-${i}" value="${tVal}" placeholder="Turb">
                <input type="text" id="ice-in-${i}" value="${iVal}" placeholder="Ice">
            </div>`;
    }

    function openModal() { document.getElementById('modalOverlay').style.display = 'block'; }
    function closeModal() { document.getElementById('modalOverlay').style.display = 'none'; }

    function updateAndSave() {
        for (let i = 1; i <= 8; i++) {
            const t = document.getElementById(`turb-in-${i}`).value;
            const ic = document.getElementById(`ice-in-${i}`).value;
            document.querySelector(`#row-${i} .turb-cell`).innerText = t;
            document.querySelector(`#row-${i} .ice-cell`).innerText = ic;
        }
        saveAllData();
        closeModal();
    }

    // Save state to Local Storage
    function saveAllData() {
        const data = { checked: document.getElementById('daySupCheck').checked, values: [] };
        for (let i = 1; i <= 8; i++) {
            data.values.push({
                t: document.getElementById(`turb-in-${i}`).value,
                ic: document.getElementById(`ice-in-${i}`).value
            });
        }
        localStorage.setItem('weatherAppData', JSON.stringify(data));
    }

    // Load state on startup
    window.onload = () => {
        const saved = JSON.parse(localStorage.getItem('weatherAppData'));
        if (saved) {
            document.getElementById('daySupCheck').checked = saved.checked;
            saved.values.forEach((item, index) => {
                let i = index + 1;
                document.getElementById(`turb-in-${i}`).value = item.t;
                document.getElementById(`ice-in-${i}`).value = item.ic;
                document.querySelector(`#row-${i} .turb-cell`).innerText = item.t;
                document.querySelector(`#row-${i} .ice-cell`).innerText = item.ic;
            });
        }
    };
</script>

</body>
</html>
